<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>í¬ë„ìŠ¤íŠœë””ì˜¤ ì ‘ìˆ˜ ì™„ë£Œ</title>
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background: linear-gradient(135deg, #f7f0ff, #e8f0ff);
      color: #333;
      text-align: center;
      padding: 60px 20px;
    }
    h2 { color: #7b1fa2; font-size: 1.8rem; margin-bottom: 10px; }
    .result-box {
      background: #fff; border-radius: 18px; padding: 40px 30px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1); display: inline-block; min-width: 340px;
    }
    #price-detail { margin-top: 10px; color: #444; font-size: 1.05rem; }
    .thumb-container {
      display: flex; flex-wrap: wrap; justify-content: center; gap: 12px; margin-top: 25px;
    }
    .thumb {
      width: 120px; height: 120px; border-radius: 12px; object-fit: cover;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .btns { margin-top: 35px; display: flex; justify-content: center; gap: 12px; }
    button {
      border: none; border-radius: 10px; font-size: 1rem; padding: 12px 22px;
      color: white; cursor: pointer; font-weight: bold; transition: all 0.25s ease;
    }
    .pay-btn { background: linear-gradient(90deg, #8e24aa, #d81b60); box-shadow: 0 4px 10px rgba(216, 27, 96, 0.4); }
    .retry-btn { background: #607d8b; }
  </style>
</head>
<body>
  <div class="result-box">
    <h2>ğŸ“¸ í¬ë„ìŠ¤íŠœë””ì˜¤ ì ‘ìˆ˜ ì™„ë£Œ</h2>
    <p id="result-text">ì—…ë¡œë“œ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
    <p id="price-detail"></p>
    <div id="thumb-container" class="thumb-container"></div>
    <div class="btns">
      <button class="pay-btn">ğŸ’³ ê²°ì œí•˜ê¸°</button>
      <button class="retry-btn" onclick="location.href='index.html'">ğŸ” ë‹¤ì‹œ ì ‘ìˆ˜</button>
    </div>
  </div>

  <script>
    try {
      const url = new URLSearchParams(location.search);
      const count = parseInt(url.get('count')) || 0;
      const size  = url.get('size') || '4x6';
      let thumbs = JSON.parse(localStorage.getItem('uploadedThumbs') || '[]');

      const priceTable = {
        '3x5': 500, '4x6': 500, '5x7': 5000, '6x8': 8000,
        '5x7cm': 1000, 'ì—¬ê¶Œì‚¬ì§„': 15000, 'ë¯¼ì¦/ë©´í—ˆì¦': 15000
      };

      let total = 0, detail = '';
      if (size === 'ì—¬ê¶Œì‚¬ì§„' || size === 'ë¯¼ì¦/ë©´í—ˆì¦') {
        total = count * priceTable[size];
        detail = `${size} ${count}ì¥ Ã— 15,000ì›`;
      } else {
        total = 3000 + count * (priceTable[size] || 0);
        detail = `ê¸°ë³¸ 3,000ì› + ${size} ${count}ì¥ Ã— ${(priceTable[size] || 0).toLocaleString()}ì›`;
      }

      document.getElementById('result-text').innerHTML = 
        `ì´ <b>${count}</b>ì¥ ì—…ë¡œë“œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br><br><b>ğŸ’° ê²°ì œ ê¸ˆì•¡: ${total.toLocaleString()}ì›</b>`;
      document.getElementById('price-detail').innerText = `(${detail})`;

      const box = document.getElementById('thumb-container');
      thumbs.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.className = 'thumb';
        box.appendChild(img);
      });
      localStorage.removeItem('uploadedThumbs');
    } catch(e) {
      console.error(e);
    }
  </script>
</body>
</html>
